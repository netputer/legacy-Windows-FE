(function(e,t){define(["backbone","jquery","utilities/QueryString","IO","Configuration"],function(t,n,r,i,s){var o=t.Model.extend({defaults:{deviceId:r.get("device_id")||"Default",pcId:r.get("pcid")||"00",backendVersion:r.get("version")||"2.0",locale:parseInt(r.get("config"),10)||s.enums.LOCALE_DEFAULT,source:r.get("source")||"",search:e.location.search,internetBar:Boolean(parseInt(r.get("internet_bar"),10))},initialize:function(){this.get("deviceId")==="Default"&&i.requestAsync(s.actions.DEVICE_GET_UDID).done(function(e){this.set({deviceId:e.body.value,search:this.get("search").replace("device_id=Default","device_id="+e.body.value)});if(e.body.value==="Default")var t=i.Backend.onmessage({"data.channel":s.events.DEVICE_ID_CHANGE},function(e){i.Backend.offmessage(t),this.set({deviceId:e.value,search:this.get("search").replace("device_id=Default","device_id="+e.value)})},this)}.bind(this))}}),u=new o;switch(u.get("locale")){case s.enums.LOCALE_DEFAULT:n("body").addClass("locale-defualt");break;case s.enums.LOCALE_ZH_CN:n("body").addClass("locale-zh-cn");break;case s.enums.LOCALE_EN_US:n("body").addClass("locale-en-us")}return e.Environment=u,u})})(this);