(function(e,t){define(["underscore","doT","jquery","ui/Panel","ui/TemplateFactory","utilities/FormatDate","Internationalization","music/iTunes/iTunesData"],function(e,t,n,r,i,s,o,u){console.log("selectLibraryView file loaded");var a=o.music,f=o.common,l=r.extend({className:r.prototype.className+" w-iTunes-select-library-panel",initialize:function(){l.__super__.initialize.call(this);var e=[{$button:n("<button/>").addClass("primary").html(f.NEXT_STEP),eventName:"NEXT_STEP"},{$button:n("<button/>").html(f.CANCEL),eventName:"CANCEL"}];this.title=a.ITUNES_IMPORT,this.width=430,this.height=270,this.draggable=!0,this.disableX=!0,this.buttons=e,this.off("NEXT_STEP"),this.off("CANCEL"),this.on("NEXT_STEP",function(){this.trigger("_NEXT_STEP",this.data[this.selectedIndex]),this.close()},this),this.on("CANCEL",function(){this.trigger("_CANCEL"),this.close()},this)},render:function(){e.extend(this.events,l.__super__.events),this.delegateEvents(),l.__super__.render.call(this)},show:function(e){l.__super__.show.call(this),this.data=e,this.recovery(),this.createContent(e)},recovery:function(){this.selectedIndex=0,n("input:first",this.$el).prop("checked","checked")},createContent:function(n){var r=t.template(i.get("iTunes","select-library-content"));e.each(n,function(e){e.time=s("yyyy-MM-dd",e.create_time)}),this.$bodyContent=r(n)},clickInput:function(e){this.selectedIndex=parseInt(e.target.value,10)},events:{"click input":"clickInput"}}),c,h=e.extend({getInstance:function(){return c||(c=new l),c}});return h})})(this);