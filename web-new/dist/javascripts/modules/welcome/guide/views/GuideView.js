(function(e){define(["backbone","jquery","doT","Configuration","ui/TemplateFactory","IO","guide/views/BindView","guide/views/CloudBackupView","guide/views/XibaibaiView","guide/views/StarterView","guide/views/TipsView","guide/views/DoraSuggestionView"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=e.View.extend({className:"w-guide-ctn vbox",template:n.template(i.get("guide","main")),cardQueue:[],regCardAsync:function(e){var n=t.Deferred();return e.checkAsync().done(function(){this.cardQueue.push(e),this.$(".step-counter-ctn").append(t("<li>").addClass("step-pointer"))}.bind(this)).always(n.resolve),n.promise()},render:function(){return this.$el.html(this.template({})),this.regCardAsync(o.getInstance()).then(function(){return this.regCardAsync(a.getInstance())}.bind(this)).then(function(){return this.regCardAsync(f.getInstance())}.bind(this)).then(function(){return this.regCardAsync(c.getInstance())}.bind(this)).then(function(){return this.regCardAsync(l.getInstance())}.bind(this)).then(function(){s.sendCustomEventsAsync(r.events.CUSTOM_WELCOME_USER_GUIDE_READY),this.run()}.bind(this)),this},showNextCard:function(){var e=this.cardQueue.shift();if(e){this.$(".content").addClass("w-anima-fade-slide-in-right").append(e.render().$el).one("webkitAnimationEnd",function(){t(this).css({"-webkit-transform":"translate3d(0, 0, 0)",opacity:1}).removeClass("w-anima-fade-slide-in-right")});var n=this.$(".step-counter-ctn .step-pointer").removeClass("current");n.eq(n.length-this.cardQueue.length-1).addClass("current"),e.once("next",function(){this.$(".content").addClass("w-anima-fade-slide-out-right").one("webkitAnimationEnd",function(){this.$(".content").css({"-webkit-transform":"translate3d(100%, 0, 0)",opacity:0}).removeClass("w-anima-fade-slide-out-right"),e.remove(),setTimeout(this.showNextCard.bind(this))}.bind(this))},this)}else s.sendCustomEventsAsync(r.events.CUSTOM_WELCOME_USER_GUIDE_FINISH)},run:function(){this.showNextCard()}});t("body").append((new h).render().$el)})})(this);