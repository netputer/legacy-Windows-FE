(function(e){define(["jquery","backbone","underscore","doT","Configuration","Internationalization","IO","Log","Account","ui/TemplateFactory","utilities/ValidateEmail","guide/views/CardView"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=t.Model.extend({defaults:{userName:"",password:"",passwordVerify:"",nickName:"",captcha:""},validate:function(e){var t="";return l(e.userName)?e.password.length<6?t="password":e.password!==e.passwordVerify?t="passwordVerify":e.nickName.trim().length===0&&(t="nickName"):t="userName",t}}),p=c.getClass().extend({className:c.getClass().prototype.className+" w-guide-cloud-backup vbox",template:r.template(f.get("guide","cloud-backup")),userModel:new h,render:function(){return n.extend(this.events,p.__super__.events),this.delegateEvents(),p.__super__.render.call(this)},checkAsync:function(){var t=e.Deferred();return o.requestAsync(i.actions.SYNC_IS_SWITCH_ON).done(function(e){e.body.value?t.reject(e):t.resolve(e)}),t.promise()},clickButtonReg:function(){this.userModel.set({userName:this.$(".username").val(),password:this.$(".password").val(),passwordVerify:this.$(".password-verify").val(),nickName:this.$(".nickname").val(),captcha:this.$(".captcha").val(),pravicy:this.$(".pravicy").prop("checked")}),this.$("input").removeClass("invalid"),this.$(".text-warning").hide();if(this.userModel.isValid())this.$(".section").css("-webkit-transform","translate3d(0, -200%, 0)"),setTimeout(function(){this.trigger("next")}.bind(this),3e3);else switch(this.userModel.validationError){case"userName":this.$(".username").addClass("invalid").next().show();break;case"password":this.$(".password").addClass("invalid").next().show();break;case"passwordVerify":this.$(".password-verify").addClass("invalid").next().show();break;case"nickName":this.$(".nickname").addClass("invalid").next().show()}},clickButtonAction:function(){a.get("isLogin")||this.$(".section").css("-webkit-transform","translate3d(0, -100%, 0)")},clickPavicy:function(e){this.$(".button-reg").prop("disabled",!e.originalEvent.srcElement.checked)},clickButtonLogin:function(){a.loginAsync(s.welcome.GUIDE_REG_LOGIN_AND_BACKUP)},clickCaptchaImage:function(){var e=this.$(".captcha-image");e.attr("src",e.attr("src"))},events:{"click .button-reg":"clickButtonReg","click .pravicy":"clickPavicy","click .button-login":"clickButtonLogin","click .captcha-image":"clickCaptchaImage"}}),d=n.extend({getInstance:function(){return new p({action:s.welcome.GUIDE_CLOUD_BACKUP_OPEN})}});return d})})(this);