(function(e){define(["underscore","backbone","doT","jquery","Device","IO","Configuration","ui/TemplateFactory"],function(e,t,n,r,i,s,o,u){console.log("FeedbackCardView - File loaded. ");var a=[],f=t.View.extend({template:n.template(u.get("wash","feedback-card")),className:"back feedback vbox",initialize:function(){var e=!1;Object.defineProperties(this,{loading:{get:function(){return e},set:function(t){e=Boolean(t)}}})},getTextAsync:function(){var e=r.Deferred();return a.length>0?e.resolve(a):r.ajax(o.actions.APP_WASH_GET_TEXT).done(function(t){a=t,e.resolve(t)}.bind(this)),e.promise()},render:function(){return this.loading=!0,this.getTextAsync().done(function(t){this.$el.html(this.template(e.extend(this.model.toJSON(),{text:t}))),this.$(".button-send").prop("disabled",!0)}.bind(this)),this},clickLastRadio:function(){this.$(".button-send").prop("disabled",!1),this.$(".input-reason").prop({disabled:!1}).focus()},clickNoneLastRadio:function(){this.$(".button-send").prop("disabled",!1),this.$(".input-reason").prop({disabled:!0})},clickButtonSend:function(){var e=this.$('input[type="radio"]:checked').val().trim();if(e){this.model.collection.remove(this.model);var t=this.model.get("suggestion").action==="UNINSTALL"||this.model.get("suggestion").action==="REPLACE";r.ajax({type:"POST",url:o.actions.APP_WASH_FEEDBACK,data:{udid:i.get("udid")||"",from:"windows","package":this.model.get("sourceApk").packageName,md5:this.model.get("sourceApk").md5,type:t?this.model.get("suggestion").action:"ignore",reason:e}}),s.requestAsync({url:o.actions.APP_IGNORE_WASH,data:{package_name:this.model.get("sourceApk").packageName}})}else this.$(".input-reason").focus()},keyupInputReason:function(e){this.$('input[type="radio"]:last').val(e.originalEvent.srcElement.value)},events:{'click input[type="radio"]:last':"clickLastRadio",'click input[type="radio"]:not(:last)':"clickNoneLastRadio","click .button-send":"clickButtonSend","keyup .input-reason":"keyupInputReason"}}),l=e.extend({getInstance:function(e){return new f(e)}});return l})})(this);